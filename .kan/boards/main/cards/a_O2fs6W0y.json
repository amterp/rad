{
  "_v": 1,
  "alias": "add-and-catch",
  "alias_explicit": false,
  "created_at_millis": 1770778296805,
  "creator": "Alexander Terp",
  "description": "Introduce ?. operator and restructure error/null fallback operators\n\nProblem\n\nRad lacks optional chaining (?.) for safe navigation through potentially-null/missing values. Additionally, the ?? operator only catches\nerrors (panics), not nulls - which is surprising to users coming from JS/C#/Kotlin/Swift where ?? is null-coalescing. There's also no\nlightweight inline operator for error-only fallbacks when null is meaningful data.\n\nProposal\n\nAdd ?. (optional chaining) and restructure the fallback operator hierarchy:\n```\n┌──────────┬─────────────────┬───────────────────────────────────────────┐\n│ Operator │    Fires on     │                Typical use                │\n├──────────┼─────────────────┼───────────────────────────────────────────┤\n│ or       │ any falsy value │ truthy defaults, boolean logic            │\n├──────────┼─────────────────┼───────────────────────────────────────────┤\n│ ??       │ null or error   │ safe defaults (the 90% case)              │\n├──────────┼─────────────────┼───────────────────────────────────────────┤\n│ catch    │ error only      │ null-is-meaningful data processing        │\n├──────────┼─────────────────┼───────────────────────────────────────────┤\n│ catch:   │ error only      │ complex recovery with multiple statements │\n└──────────┴─────────────────┴───────────────────────────────────────────┘\n```\nChanges\n\n1. Add ?. optional chaining operator\n- m?.a?.b?.c returns null if any step is null/missing instead of panicking.\n\n2. Broaden ?? to also fire on null\n- Currently only catches errors (panics). Add a post-evaluation null check so null values also trigger the right-hand side.\n- config.port ?? 8080 gives you a default whether the value is null or errored.\n- Breaking change: m = {\"k\": null}; m[\"k\"] ?? \"default\" currently returns null, would now return \"default\". Acceptable pre-1.0.\n\n3. Add catch as an inline operator\n- a = parse_int(x) catch 0 - evaluates right side only on error, lets null pass through.\n- Same panic/recover semantics as current ??.\n- Does not expose the error value to the right-hand side (use catch: block for that).\n\n4. catch: block unchanged\n- Continues to work as-is for complex multi-statement error recovery with access to the error value.\n\nDesign decisions to finalize\n\n- Precedence and associativity of ?? vs catch vs or, especially when mixed in one expression.\n- Chaining legality: Should foo() ?? bar() catch baz() be allowed? If so, what's the grouping?\n- catch operator + catch: block parsing: The : distinguishes them, but confirm the grammar is unambiguous (e.g. foo() catch bar() catch: ...\n should probably be illegal).",
  "id": "a_O2fs6W0y",
  "title": "add ?. and catch operator and null-coalesce ??",
  "type": "feature",
  "updated_at_millis": 1770778326281
}